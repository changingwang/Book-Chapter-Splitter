# æ‹†ä¹¦ç¥å™¨ (Book Chapter Splitter)

ğŸ§  **ä¸“ä¸ºçŸ¥è¯†å·¥ä½œè€…è®¾è®¡çš„æ™ºèƒ½æ–‡æ¡£æ‹†åˆ†å·¥å…·**

å®Œç¾å¯¹æ¥ [MinerU](https://github.com/opendatalab/MinerU)ã€[Markitdown](https://github.com/microsoft/markitdown) ç­‰æ–‡æ¡£å¤„ç†å·¥å…·çš„è¾“å‡ºï¼Œå°†è½¬æ¢åçš„å­¦æœ¯æ–‡çŒ®ã€æŠ€æœ¯æ–‡æ¡£ã€ä¹¦ç±èµ„æ–™æ™ºèƒ½æ‹†åˆ†ä¸ºå¯ç®¡ç†çš„çŸ¥è¯†å•å…ƒï¼Œä¸€é”®ç”Ÿæˆ **Obsidian åŒé“¾ç¬”è®°** å’Œ **æ™ºèƒ½æ ‡ç­¾ä½“ç³»**ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **æ™ºèƒ½ç»“æ„è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ä¸­æ–‡ç« èŠ‚æ ‡é¢˜æ ¼å¼ï¼ˆç¬¬ä¸€ç« ã€ç¬¬äºŒç« ç­‰ï¼‰
- ğŸ“„ **å¤šçº§æ‹†åˆ†**: æ”¯æŒç« èŠ‚å’Œå°èŠ‚çš„å±‚æ¬¡åŒ–æ‹†åˆ†
- ğŸ·ï¸ **æ™ºèƒ½æ ‡ç­¾ç”Ÿæˆ**: åŸºäº TF-IDF å’Œ TextRank ç®—æ³•è‡ªåŠ¨ç”Ÿæˆå…³é”®è¯æ ‡ç­¾
- ğŸ“š **ç›®å½•ç”Ÿæˆ**: è‡ªåŠ¨åˆ›å»ºå±‚æ¬¡åŒ–çš„ç›®å½•æ–‡æ¡£
- ğŸ§­ **å¯¼èˆªé“¾æ¥**: ä¸ºæ¯ä¸ªæ–‡ä»¶æ·»åŠ è¿”å›ç›®å½•çš„å¯¼èˆªé“¾æ¥
- ğŸ–¼ï¸ **å›¾ç‰‡å¤„ç†**: è‡ªåŠ¨å¤„ç†å’Œå¤åˆ¶å›¾ç‰‡èµ„æº
- âš™ï¸ **çµæ´»é…ç½®**: æ”¯æŒå¤šç§é…ç½®é€‰é¡¹å’Œå¤„ç†æ¨¡å¼
- ğŸš€ **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„å¤„ç†æµç¨‹ï¼Œæ”¯æŒå¤§æ–‡æ¡£å¤„ç†
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯æ¢å¤å’Œå®¹é”™æœºåˆ¶
- ğŸ’» **å‘½ä»¤è¡Œç•Œé¢**: ç®€å•æ˜“ç”¨çš„ CLI å·¥å…·
- ğŸ”— **ObsidianåŸç”Ÿå…¼å®¹**: è‡ªåŠ¨ç”Ÿæˆç¬¦åˆObsidianæ ¼å¼çš„åŒé“¾é“¾æ¥å’ŒYAMLå‰ç½®å…ƒæ•°æ®
- ğŸ“š **çŸ¥è¯†å›¾è°±å°±ç»ª**: è¾“å‡ºçš„æ–‡ä»¶ç»“æ„ç›´æ¥æ”¯æŒObsidianå›¾è°±è§†å›¾å’Œå…³ç³»åˆ†æ
- ğŸ¯ **åå‘é“¾æ¥è‡ªåŠ¨**: è‡ªåŠ¨åœ¨ç›¸å…³æ–‡ä»¶é—´å»ºç«‹åŒå‘å¼•ç”¨å…³ç³»

## ğŸ”„ å…¸å‹å·¥ä½œæµç¨‹

```mermaid
graph LR
    A[PDF/Word/ç½‘é¡µ] --> B[MinerU/Markitdown]
    B --> C[è½¬æ¢åçš„MDæ–‡ä»¶]
    C --> D[æ‹†ä¹¦ç¥å™¨]
    D --> E[ObsidiançŸ¥è¯†åº“]
    D --> F[åŒé“¾å…³è”]
    D --> G[æ™ºèƒ½æ ‡ç­¾]
```

## âš¡ MinerU/Markitdownä¸“ç”¨ä¼˜åŒ–

### é’ˆå¯¹è½¬æ¢æ–‡æ¡£çš„ç‰¹æ®Šå¤„ç†
- **æ™ºèƒ½è¯†åˆ«è½¬æ¢ç—•è¿¹**: è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†MinerU/Markitdownè½¬æ¢åçš„ç‰¹æ®Šæ ¼å¼æ ‡è®°
- **å›¾ç‰‡è·¯å¾„ä¿®å¤**: è‡ªåŠ¨ä¿®æ­£è½¬æ¢è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å›¾ç‰‡è·¯å¾„é—®é¢˜
- **ç¼–ç æ ¼å¼é€‚é…**: æ™ºèƒ½å¤„ç†è½¬æ¢åå¯èƒ½å‡ºç°çš„ç¼–ç é—®é¢˜
- **ç»“æ„å¢å¼º**: å¯¹è½¬æ¢åçš„æ–‡æ¡£ç»“æ„è¿›è¡Œå¢å¼ºï¼Œæå‡å¯è¯»æ€§

### æ¨èé…ç½®
```bash
# é’ˆå¯¹MinerUè¾“å‡ºä¼˜åŒ–çš„é…ç½®
python -m book_splitter -i mineru_output.md -o obsidian_vault \
    --sections --tags --navigation \
    --min-tags 3 --max-tags 8
```

## ğŸ¯ æœ€ä½³åº”ç”¨åœºæ™¯
- ğŸ“– **å­¦æœ¯ç ”ç©¶**: å°†PDFè®ºæ–‡ã€å­¦æœ¯è‘—ä½œè½¬æ¢ä¸ºå¯ç®¡ç†çš„çŸ¥è¯†å•å…ƒ
- ğŸ’» **æŠ€æœ¯å­¦ä¹ **: å¤„ç†ç¼–ç¨‹ä¹¦ç±ã€æŠ€æœ¯æ–‡æ¡£ï¼Œå»ºç«‹çŸ¥è¯†ä½“ç³»
- ğŸ“š **çŸ¥è¯†ç®¡ç†**: æ„å»ºä¸ªäººçŸ¥è¯†åº“ï¼Œå®ç°çŸ¥è¯†çš„ç»“æ„åŒ–å­˜å‚¨
- ğŸ” **å†…å®¹åˆ›ä½œ**: ä¸ºå†™ä½œå’Œç ”ç©¶æä¾›ç»“æ„åŒ–çš„ç´ æåº“
- ğŸ“ **æ•™å­¦å‡†å¤‡**: å°†æ•™æèµ„æ–™æ‹†åˆ†ä¸ºæ•™å­¦å•å…ƒ

## ğŸ¯ çŸ¥è¯†ç®¡ç†æœ€ä½³å®è·µ

### 1. æ–‡ä»¶å‘½åç­–ç•¥
- ä½¿ç”¨æœ‰æ„ä¹‰çš„ç« èŠ‚æ ‡é¢˜
- ä¿æŒå‘½åä¸€è‡´æ€§
- åˆ©ç”¨æ ‡ç­¾è¿›è¡Œå¤šç»´åº¦åˆ†ç±»

### 2. æ ‡ç­¾ä½“ç³»è®¾è®¡
- **ä¸»é¢˜æ ‡ç­¾**: æ ‡æ˜çŸ¥è¯†é¢†åŸŸï¼ˆå¦‚#äººå·¥æ™ºèƒ½ #ç»æµå­¦ï¼‰
- **ç±»å‹æ ‡ç­¾**: æ ‡æ˜å†…å®¹ç±»å‹ï¼ˆå¦‚#ç†è®º #æ¡ˆä¾‹ #æ–¹æ³•ï¼‰
- **çŠ¶æ€æ ‡ç­¾**: æ ‡æ˜å­¦ä¹ çŠ¶æ€ï¼ˆå¦‚#å·²æŒæ¡ #å¤ä¹ ä¸­ #å¾…æ·±å…¥ï¼‰

### 3. åŒé“¾ä½¿ç”¨å»ºè®®
- åœ¨ç›¸å…³æ¦‚å¿µé—´å»ºç«‹è¿æ¥
- è®°å½•ä¸ªäººç†è§£å’Œæ€è€ƒ
- æ„å»ºçŸ¥è¯†æ¼”è¿›è·¯å¾„

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- æ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼šWindowsã€macOSã€Linux

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/book-chapter-splitter.git
cd book-chapter-splitter

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
python -m venv .venv

# å®‰è£…å¯ç¼–è¾‘æ¨¡å¼
pip install -e .

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install pytest pytest-cov
```

### ä¸»è¦ä¾èµ–

- `jieba`: ä¸­æ–‡åˆ†è¯å’Œå…³é”®è¯æå–
- `scikit-learn`: TF-IDF ç®—æ³•æ”¯æŒ
- `networkx`: TextRank ç®—æ³•æ”¯æŒ
- `click`: å‘½ä»¤è¡Œç•Œé¢

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# æœ€ç®€å•çš„ç”¨æ³• - åªæ‹†åˆ†ç« èŠ‚
python -m book_splitter -i input.md -o output_dir --no-sections --no-tags --no-navigation

# å®Œæ•´åŠŸèƒ½ - æ‹†åˆ†ç« èŠ‚å’Œå°èŠ‚ï¼Œç”Ÿæˆæ ‡ç­¾å’Œå¯¼èˆªï¼ˆé»˜è®¤å¯ç”¨æ‰€æœ‰åŠŸèƒ½ï¼‰
python -m book_splitter -i input.md -o output_dir
```

### è¾“å…¥æ–‡æ¡£æ ¼å¼è¦æ±‚

æ‚¨çš„ markdown æ–‡æ¡£åº”è¯¥éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

**âš ï¸ é‡è¦æ ¼å¼è§„èŒƒï¼š**
- ç« èŠ‚æ ‡é¢˜ä¸­**ä¸èƒ½åŒ…å«ä¸‹åˆ’çº¿ `_`**ï¼Œè¯·ä½¿ç”¨ç©ºæ ¼åˆ†éš”
- æ­£ç¡®æ ¼å¼ï¼š`# ç¬¬ä¸€ç«  å¯¼è®ºï¼šå¯¹è±¡å’Œåœ°ä½`
- é”™è¯¯æ ¼å¼ï¼š`# ç¬¬ä¸€ç« _å¯¼è®ºï¼šå¯¹è±¡å’Œåœ°ä½`
- å¦‚æœæ‚¨çš„æ–‡æ¡£åŒ…å«ä¸‹åˆ’çº¿ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„ `fix_chapter_titles.py` å·¥å…·è¿›è¡Œæ‰¹é‡ä¿®å¤

ğŸ“‹ **è¯¦ç»†æ ¼å¼è¦æ±‚è¯·å‚è€ƒï¼š[FORMAT_REQUIREMENTS.md](docs/FORMAT_REQUIREMENTS.md)**

**ä¼ ç»Ÿæ ¼å¼ï¼š**

```markdown
# æ–‡æ¡£æ ‡é¢˜

# ç¬¬ä¸€ç«  ç« èŠ‚æ ‡é¢˜

ç« èŠ‚å†…å®¹...

ä¸€ã€å°èŠ‚æ ‡é¢˜

å°èŠ‚å†…å®¹...

äºŒã€å°èŠ‚æ ‡é¢˜

å°èŠ‚å†…å®¹...

# ç¬¬äºŒç«  å¦ä¸€ä¸ªç« èŠ‚

æ›´å¤šå†…å®¹...
```

**æ–°æ”¯æŒæ ¼å¼ï¼š**

```markdown
# æ–‡æ¡£æ ‡é¢˜

## ä¸€ã€ç« èŠ‚æ ‡é¢˜

ç« èŠ‚å†…å®¹...

### ï¼ˆä¸€ï¼‰å°èŠ‚æ ‡é¢˜

å°èŠ‚å†…å®¹...

### ï¼ˆäºŒï¼‰å°èŠ‚æ ‡é¢˜

å°èŠ‚å†…å®¹...

## äºŒã€å¦ä¸€ä¸ªç« èŠ‚

æ›´å¤šå†…å®¹...
```

æ”¯æŒçš„ç« èŠ‚æ ¼å¼ï¼š

- `# ç¬¬ä¸€ç«  æ ‡é¢˜`ã€`# ç¬¬äºŒç«  æ ‡é¢˜` ç­‰
- `# ç¬¬1ç«  æ ‡é¢˜`ã€`# ç¬¬2ç«  æ ‡é¢˜` ç­‰
- `## ä¸€ã€æ ‡é¢˜`ã€`## äºŒã€æ ‡é¢˜` ç­‰ï¼ˆæ–°å¢æ”¯æŒï¼‰

æ”¯æŒçš„å°èŠ‚æ ¼å¼ï¼š

- `ä¸€ã€æ ‡é¢˜`ã€`äºŒã€æ ‡é¢˜` ç­‰
- `1ã€æ ‡é¢˜`ã€`2ã€æ ‡é¢˜` ç­‰
- `(ä¸€)æ ‡é¢˜`ã€`(äºŒ)æ ‡é¢˜` ç­‰
- `### ï¼ˆä¸€ï¼‰æ ‡é¢˜`ã€`### ï¼ˆäºŒï¼‰æ ‡é¢˜` ç­‰ï¼ˆæ–°å¢æ”¯æŒï¼‰

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### å‘½ä»¤è¡Œé€‰é¡¹

```bash
python -m book_splitter [OPTIONS]

é€‰é¡¹:
  -i, --input TEXT           è¾“å…¥çš„markdownæ–‡ä»¶è·¯å¾„ [é»˜è®¤: full.md]
  -o, --output TEXT          è¾“å‡ºç›®å½•è·¯å¾„ [é»˜è®¤: output]
  -c, --config TEXT          é…ç½®æ–‡ä»¶è·¯å¾„
  --no-sections              ç¦ç”¨å°èŠ‚æ‹†åˆ†ï¼Œåªæ‹†åˆ†ç« èŠ‚
  --no-tags                  ç¦ç”¨æ ‡ç­¾ç”Ÿæˆ
  --no-navigation            ç¦ç”¨å¯¼èˆªé“¾æ¥
  --min-tags INTEGER         æ¯ä¸ªå°èŠ‚çš„æœ€å°‘æ ‡ç­¾æ•°
  --max-tags INTEGER         æ¯ä¸ªå°èŠ‚çš„æœ€å¤šæ ‡ç­¾æ•°
  --help                     æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### ä½¿ç”¨ç¤ºä¾‹

#### 1. åŸºç¡€æ‹†åˆ†ï¼ˆä»…ç« èŠ‚ï¼‰

```bash
python -m book_splitter -i book.md -o output --no-sections
```

ç”Ÿæˆç»“æ„ï¼š

```
output/
â”œâ”€â”€ ç›®å½•.md
â””â”€â”€ chapters/
    â”œâ”€â”€ ç¬¬ä¸€ç« _æ ‡é¢˜.md
    â”œâ”€â”€ ç¬¬äºŒç« _æ ‡é¢˜.md
    â””â”€â”€ ...
```

#### 2. å®Œæ•´æ‹†åˆ†ï¼ˆç« èŠ‚+å°èŠ‚ï¼‰

```bash
python -m book_splitter -i book.md -o output --sections
```

ç”Ÿæˆç»“æ„ï¼š

```
output/
â”œâ”€â”€ ç›®å½•.md
â”œâ”€â”€ chapters/
â”‚   â”œâ”€â”€ ç¬¬ä¸€ç« _æ ‡é¢˜.md
â”‚   â””â”€â”€ ç¬¬äºŒç« _æ ‡é¢˜.md
â””â”€â”€ sections/
    â”œâ”€â”€ 1.1_æ ‡é¢˜.md
    â”œâ”€â”€ 1.2_æ ‡é¢˜.md
    â”œâ”€â”€ 2.1_æ ‡é¢˜.md
    â””â”€â”€ ...
```

#### 3. å¯ç”¨æ‰€æœ‰åŠŸèƒ½

```bash
python -m book_splitter -i book.md -o output
```

ç”Ÿæˆçš„æ–‡ä»¶å°†åŒ…å«ï¼š

- YAML å‰ç½®å…ƒæ•°æ®å’Œæ ‡ç­¾
- å¯¼èˆªé“¾æ¥
- å¤„ç†åçš„å›¾ç‰‡èµ„æº

#### 4. è‡ªå®šä¹‰æ ‡ç­¾æ•°é‡

```bash
python -m book_splitter -i book.md -o output --sections --tags --min-tags 2 --max-tags 5
```

### è¾“å‡ºæ–‡ä»¶æ ¼å¼

#### å¸¦æ ‡ç­¾çš„æ–‡ä»¶ç¤ºä¾‹

```markdown
---
title: "æ”¿æ²»æƒåŠ›ç†è®º"
type: "section"
section_title: "æ”¿æ²»æƒåŠ›ç†è®º"
chapter_title: "ç¬¬ä¸€ç«  æ”¿æ²»å­¦åŸºç¡€"
level: 3
line_range: "45-78"
tags:
  - æ”¿æ²»æƒåŠ›
  - æƒåŠ›ç†è®º
  - æ”¿æ²»å­¦
  - ç¤¾ä¼šç§‘å­¦
---

# æ”¿æ²»æƒåŠ›ç†è®º

æ”¿æ²»æƒåŠ›æ˜¯æ”¿æ²»å­¦ç ”ç©¶çš„æ ¸å¿ƒæ¦‚å¿µ...

---

[â† è¿”å›ç›®å½•](../ç›®å½•.md) | _å°èŠ‚æ–‡ä»¶_
```

#### ç›®å½•æ–‡ä»¶ç¤ºä¾‹

```markdown
# ç›®å½•

## ğŸ“š ç« èŠ‚åˆ—è¡¨

### [ç¬¬ä¸€ç«  æ”¿æ²»å­¦åŸºç¡€](chapters/ç¬¬ä¸€ç« _æ”¿æ²»å­¦åŸºç¡€.md)

- [1.1 æ”¿æ²»æƒåŠ›ç†è®º](sections/1.1_æ”¿æ²»æƒåŠ›ç†è®º.md)
- [1.2 æ”¿æ²»åˆ¶åº¦åˆ†æ](sections/1.2_æ”¿æ²»åˆ¶åº¦åˆ†æ.md)

### [ç¬¬äºŒç«  æ”¿æ²»è¡Œä¸º](chapters/ç¬¬äºŒç« _æ”¿æ²»è¡Œä¸º.md)

- [2.1 æ”¿æ²»å‚ä¸](sections/2.1_æ”¿æ²»å‚ä¸.md)
- [2.2 æ”¿æ²»æ–‡åŒ–](sections/2.2_æ”¿æ²»æ–‡åŒ–.md)

## ğŸ“Š æ–‡æ¡£ç»Ÿè®¡

- æ€»ç« èŠ‚æ•°: 2
- æ€»å°èŠ‚æ•°: 4
- ç”Ÿæˆæ–‡ä»¶æ•°: 7
- å¤„ç†æ—¶é—´: 0.15 ç§’
```

## âš™ï¸ é…ç½®æ–‡ä»¶

æ‚¨å¯ä»¥åˆ›å»ºé…ç½®æ–‡ä»¶æ¥ä¿å­˜å¸¸ç”¨è®¾ç½®ï¼š

### config.json

```json
{
  "output_dir": "output",
  "create_sections": true,
  "generate_tags": true,
  "add_navigation": true,
  "preserve_images": true,
  "min_tags_per_section": 3,
  "max_tags_per_section": 8,
  "filename_separator": "_"
}
```

### config.yaml

```yaml
output_dir: output
create_sections: true
generate_tags: true
add_navigation: true
preserve_images: true
min_tags_per_section: 3
max_tags_per_section: 8
filename_separator: "_"
```

ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼š

```bash
python -m book_splitter -i book.md --config config.yaml
python -m book_splitter -i book.md --config config.json
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### Python API

```python
from book_splitter import BookSplitter, ProcessingConfig

# åˆ›å»ºé…ç½®
config = ProcessingConfig()
config.source_file = "input.md"
config.output_dir = "output"
config.create_sections = True
config.generate_tags = True

# åˆ›å»ºå¤„ç†å™¨
splitter = BookSplitter(config)

# å¤„ç†æ–‡ä»¶
result = splitter.process()

if result['status'] == 'success':
    print(f"å¤„ç†å®Œæˆï¼ç”Ÿæˆäº† {result['generated_files_count']} ä¸ªæ–‡ä»¶")
else:
    print(f"å¤„ç†å¤±è´¥: {result['error']}")
```

### æ‰¹é‡å¤„ç†

```python
from book_splitter import BookSplitter, ProcessingConfig

config = ProcessingConfig()
config.create_sections = True
config.generate_tags = True

splitter = BookSplitter(config)

# æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶
input_files = ["book1.md", "book2.md", "book3.md"]
results = splitter.process_batch(input_files, "batch_output")

for file_path, success in results.items():
    status = "æˆåŠŸ" if success else "å¤±è´¥"
    print(f"{file_path}: {status}")
```

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ–‡æ¡£å‡†å¤‡

- ç¡®ä¿ç« èŠ‚æ ‡é¢˜æ ¼å¼ä¸€è‡´
- ä½¿ç”¨æ ‡å‡†çš„ä¸­æ–‡æ•°å­—æˆ–é˜¿æ‹‰ä¼¯æ•°å­—
- ä¿æŒå±‚æ¬¡ç»“æ„æ¸…æ™°

### 2. æ€§èƒ½ä¼˜åŒ–

- å¯¹äºå¤§æ–‡æ¡£ï¼ˆ>10MBï¼‰ï¼Œå»ºè®®ç¦ç”¨æ ‡ç­¾ç”Ÿæˆä»¥æé«˜é€Ÿåº¦
- ä½¿ç”¨ SSD å­˜å‚¨å¯ä»¥æ˜¾è‘—æé«˜å¤„ç†é€Ÿåº¦
- æ‰¹é‡å¤„ç†æ—¶å»ºè®®ä½¿ç”¨è¾ƒå°çš„æ‰¹æ¬¡å¤§å°

### 3. æ–‡ä»¶ç®¡ç†

- å®šæœŸæ¸…ç†è¾“å‡ºç›®å½•
- ä½¿ç”¨æœ‰æ„ä¹‰çš„è¾“å‡ºç›®å½•åç§°
- å¤‡ä»½åŸå§‹æ–‡æ¡£

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœªè¯†åˆ«åˆ°ç« èŠ‚

**é—®é¢˜**: å¤„ç†åæ˜¾ç¤º"æœªæ‰¾åˆ°æœ‰æ•ˆçš„ç« èŠ‚ç»“æ„"

**è§£å†³æ–¹æ¡ˆ**:

- æ£€æŸ¥ç« èŠ‚æ ‡é¢˜æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®ä¿ä½¿ç”¨ `# ç¬¬ä¸€ç« ` æˆ– `# ç¬¬1ç« ` æ ¼å¼
- éªŒè¯æ–‡æ¡£ç¼–ç ä¸º UTF-8

#### 2. æ ‡ç­¾ç”Ÿæˆå¤±è´¥

**é—®é¢˜**: ç”Ÿæˆçš„æ ‡ç­¾è´¨é‡ä¸é«˜æˆ–æ•°é‡ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:

- è°ƒæ•´ `--min-tags` å’Œ `--max-tags` å‚æ•°
- ç¡®ä¿æ–‡æ¡£å†…å®¹è¶³å¤Ÿä¸°å¯Œ
- æ£€æŸ¥æ˜¯å¦å®‰è£…äº† jieba åˆ†è¯åº“

#### 3. æ–‡ä»¶ååŒ…å«ç‰¹æ®Šå­—ç¬¦

**é—®é¢˜**: ç”Ÿæˆçš„æ–‡ä»¶ååŒ…å«ä¸æ”¯æŒçš„å­—ç¬¦

**è§£å†³æ–¹æ¡ˆ**:

- å·¥å…·ä¼šè‡ªåŠ¨æ¸…ç†ç‰¹æ®Šå­—ç¬¦
- å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·æ£€æŸ¥åŸå§‹æ ‡é¢˜æ ¼å¼
- å¯ä»¥æ‰‹åŠ¨é‡å‘½åç”Ÿæˆçš„æ–‡ä»¶

#### 4. å†…å­˜ä½¿ç”¨è¿‡é«˜

**é—®é¢˜**: å¤„ç†å¤§æ–‡æ¡£æ—¶å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:

- ç¦ç”¨æ ‡ç­¾ç”Ÿæˆ (`--no-tags`)
- åˆ†æ‰¹å¤„ç†å¤§æ–‡æ¡£
- å¢åŠ ç³»ç»Ÿå†…å­˜æˆ–ä½¿ç”¨è™šæ‹Ÿå†…å­˜

### é”™è¯¯ä»£ç 

- `FileNotFoundError`: è¾“å…¥æ–‡ä»¶ä¸å­˜åœ¨
- `ValueError`: æ–‡æ¡£æ ¼å¼ä¸æ­£ç¡®æˆ–æ— ç« èŠ‚ç»“æ„
- `PermissionError`: è¾“å‡ºç›®å½•æƒé™ä¸è¶³
- `MemoryError`: å†…å­˜ä¸è¶³

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
2. ä½¿ç”¨ `--help` æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹
3. å°è¯•æœ€å°é…ç½®æµ‹è¯•
4. æ£€æŸ¥æ–‡æ¡£æ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•æ¨¡å—
python -m pytest tests/test_integration.py -v
python -m pytest tests/test_tag_generator.py -v

# è¿è¡Œç‰¹å®šæµ‹è¯•å‡½æ•°
python -m pytest tests/test_integration.py::test_end_to_end_processing -v

# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¦†ç›–ç‡
python -m pytest tests/ --cov=book_splitter --cov-report=html
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
pip install pytest-cov
python -m pytest tests/ --cov=book_splitter --cov-report=html
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
book-chapter-splitter/
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ requirements.txt                   # Pythonä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ setup.py                          # å®‰è£…é…ç½®æ–‡ä»¶
â”œâ”€â”€ run_splitter.py                   # å¿«é€Ÿè¿è¡Œè„šæœ¬
â”œâ”€â”€ config.example.json               # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”œâ”€â”€ config.example.yaml               # é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆYAMLï¼‰
â”œâ”€â”€ .gitignore                        # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ LICENSE                           # é¡¹ç›®è®¸å¯è¯
â”œâ”€â”€ .github/                          # GitHubå·¥ä½œæµé…ç½®
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ python-tests.yml          # è‡ªåŠ¨åŒ–æµ‹è¯•é…ç½®
â”œâ”€â”€ docs/                             # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ FORMAT_SUPPORT.md             # æ”¯æŒæ ¼å¼è¯´æ˜
â”‚   â”œâ”€â”€ TECHNICAL_CHANGES.md          # æŠ€æœ¯å˜æ›´æ–‡æ¡£
â”‚   â”œâ”€â”€ FORMAT_REQUIREMENTS.md        # æ ¼å¼è¦æ±‚è§„èŒƒ
â”‚   â”œâ”€â”€ USAGE.md                      # è¯¦ç»†ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ TROUBLESHOOTING.md            # æ•…éšœæ’é™¤æŒ‡å—
â”‚   â”œâ”€â”€ CHANGELOG.md                  # æ›´æ–°æ—¥å¿—
â”‚   â”œâ”€â”€ PROJECT_SUMMARY.md            # é¡¹ç›®æ€»ç»“æ–‡æ¡£
â”‚   â””â”€â”€ DOCUMENTATION_UPDATE_SUMMARY.local.md  # æ–‡æ¡£æ›´æ–°æ‘˜è¦
â”œâ”€â”€ data/                             # æ•°æ®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ demo.md                       # æ¼”ç¤ºæ•°æ®æ–‡ä»¶
â”œâ”€â”€ src/                              # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ book_splitter/
â”‚       â”œâ”€â”€ __init__.py               # åŒ…åˆå§‹åŒ–
â”‚       â”œâ”€â”€ __main__.py               # æ¨¡å—å…¥å£
â”‚       â”œâ”€â”€ main.py                   # ä¸»å¤„ç†å™¨
â”‚       â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†
â”‚       â”œâ”€â”€ cli.py                    # å‘½ä»¤è¡Œæ¥å£
â”‚       â”œâ”€â”€ analyzers/                # ç»“æ„åˆ†æå™¨
â”‚       â”‚   â””â”€â”€ structure_analyzer.py
â”‚       â”œâ”€â”€ extractors/               # å†…å®¹æå–å™¨
â”‚       â”‚   â””â”€â”€ content_extractor.py
â”‚       â”œâ”€â”€ generators/               # ç”Ÿæˆå™¨
â”‚       â”‚   â”œâ”€â”€ tag_generator.py      # æ ‡ç­¾ç”Ÿæˆå™¨
â”‚       â”‚   â””â”€â”€ file_generator.py     # æ–‡ä»¶ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ managers/                 # ç®¡ç†å™¨
â”‚       â”‚   â””â”€â”€ link_manager.py       # é“¾æ¥ç®¡ç†å™¨
â”‚       â”œâ”€â”€ models/                   # æ•°æ®æ¨¡å‹
â”‚       â”‚   â””â”€â”€ __init__.py
â”‚       â””â”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚           â””â”€â”€ __init__.py
â”œâ”€â”€ tools/                            # å·¥å…·è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ README.md                     # å·¥å…·ä½¿ç”¨è¯´æ˜
â”‚   â””â”€â”€ fix_chapter_titles.py         # ç« èŠ‚æ ‡é¢˜æ ¼å¼ä¿®å¤å·¥å…·
â””â”€â”€ tests/                            # æµ‹è¯•æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ test_basic.py                 # åŸºç¡€åŠŸèƒ½æµ‹è¯•
    â”œâ”€â”€ test_structure_analyzer.py    # ç»“æ„åˆ†æå™¨æµ‹è¯•
    â”œâ”€â”€ test_content_extractor.py     # å†…å®¹æå–å™¨æµ‹è¯•
    â”œâ”€â”€ test_tag_generator.py         # æ ‡ç­¾ç”Ÿæˆå™¨æµ‹è¯•
    â”œâ”€â”€ test_file_generator.py        # æ–‡ä»¶ç”Ÿæˆå™¨æµ‹è¯•
    â”œâ”€â”€ test_link_manager.py          # é“¾æ¥ç®¡ç†å™¨æµ‹è¯•
    â”œâ”€â”€ test_integration.py           # é›†æˆæµ‹è¯•
    â””â”€â”€ test_*.py                     # å…¶ä»–æµ‹è¯•æ–‡ä»¶

æ³¨æ„ï¼š
- input*/ å’Œ output*/ ç›®å½•ä¼šåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åŠ¨æ€åˆ›å»ºï¼Œå·²åœ¨ .gitignore ä¸­é…ç½®å¿½ç•¥
- IDE é…ç½®æ–‡ä»¶ã€ç¼“å­˜ç›®å½•ç­‰ç”±å·¥å…·è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶å·²åœ¨ .gitignore ä¸­é…ç½®å¿½ç•¥ï¼Œä¸çº³å…¥ç‰ˆæœ¬æ§åˆ¶
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/book-chapter-splitter.git
cd book-chapter-splitter

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # åœ¨Windowsä¸Š: .venv\Scripts\activate

# å®‰è£…å¯ç¼–è¾‘æ¨¡å¼
pip install -e .

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install pytest pytest-cov black flake8
```

### ä»£ç é£æ ¼

æœ¬é¡¹ç›®ä½¿ç”¨ï¼š
- `black` è¿›è¡Œä»£ç æ ¼å¼åŒ–
- `flake8` è¿›è¡Œä»£ç æ£€æŸ¥

```bash
# æ ¼å¼åŒ–ä»£ç 
black src/ tests/

# æ£€æŸ¥ä»£ç é£æ ¼
flake8 src/ tests/
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [MinerU](https://github.com/opendatalab/MinerU) æä¾›çš„å‡ºè‰²PDFè§£æèƒ½åŠ›
- [Markitdown](https://github.com/microsoft/markitdown) æä¾›çš„æ–‡æ¡£è½¬æ¢æ”¯æŒ
- [Obsidian](https://obsidian.md/) å¯å‘çš„çŸ¥è¯†ç®¡ç†æ–¹æ³•
- æœ¬é¡¹ç›®çš„æ‰€æœ‰è´¡çŒ®è€…å’Œç”¨æˆ·

## ğŸ“ è”ç³»æˆ‘ä»¬

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿ï¼š
- æäº¤ [Issue](https://github.com/your-username/book-chapter-splitter/issues)
- å‘é€ [Pull Request](https://github.com/your-username/book-chapter-splitter/pulls)
- é€šè¿‡ [é‚®ä»¶](mailto:your-email@example.com) è”ç³»æˆ‘ä»¬

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼