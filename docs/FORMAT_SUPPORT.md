# 支持的文档格式

本文档详细说明书籍章节拆分器支持的各种markdown文档格式。

## 章节格式支持

### 传统格式
- `# 第一章 标题` - 标准的第X章格式
- `# 第1章 标题` - 使用阿拉伯数字的章节格式
- `# 第二章 标题` - 中文数字章节格式

### 新增格式（v1.0.1+）
- `## 一、标题` - 二级标题 + 中文数字 + 顿号格式
- `## 二、标题` - 适用于政府报告、学术论文等

## 小节格式支持

### 传统格式
- `一、标题` - 中文数字 + 顿号
- `1、标题` - 阿拉伯数字 + 顿号
- `(一)标题` - 括号 + 中文数字

### 新增格式（v1.0.1+）
- `### （一）标题` - 三级标题 + 括号 + 中文数字
- `### （二）标题` - 适用于详细的小节划分

## 格式示例

### 示例1：传统学术书籍格式
```markdown
# 书名

# 第一章 导论

本章介绍...

一、研究背景

背景内容...

二、研究目的

目的内容...

# 第二章 理论基础

理论内容...
```

### 示例2：政府报告格式
```markdown
# 报告标题

## 一、背景分析

### （一）基本概念

概念说明...

### （二）政策历程

历程梳理...

## 二、模式分类

### （一）引导主体

主体分析...

### （二）改造模式

模式说明...
```

## 技术实现

### 正则表达式模式

```python
# 章节识别模式
CHAPTER_PATTERN = r'^# 第[一二三四五六七八九十0-9]+章\s+(.+?)(?:\s+…+.*)?$'
CHAPTER_PATTERN_ALT = r'^## ([一二三四五六七八九十0-9]+)、(.+?)$'

# 小节识别模式
SECTION_PATTERNS = {
    2: r'^# 第[一二三四五六七八九十0-9]+节\s+(.+?)(?:\s+\d+)?$',
    3: r'^[一二三四五六七八九十0-9]+、\s*(.+?)(?:\s+\d+)?$',
    4: r'^\([一二三四五六七八九十0-9]+\)\s*(.+?)(?:\s+\d+)?$',
    5: r'^### （[一二三四五六七八九十0-9]+）(.+?)$'
}
```

## 使用建议

1. **格式一致性**: 在同一文档中保持格式一致
2. **层次清晰**: 确保章节和小节的层次关系明确
3. **标题简洁**: 避免标题过长或包含特殊字符
4. **编码规范**: 使用UTF-8编码保存文档

## 兼容性说明

- 支持中文数字（一、二、三...）和阿拉伯数字（1、2、3...）
- 自动处理标题中的页码和其他附加信息
- 兼容不同的标点符号使用习惯
- 支持混合格式文档的处理

## 扩展计划

未来版本计划支持：
- 更多级别的小节格式
- 英文文档格式
- 自定义格式配置
- 格式自动检测和建议